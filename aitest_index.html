<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI æ‡‰ç”¨ 3 åˆ†é˜å«é‡‘é‡å°æª¢æ¸¬</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
        }
        .btn-gradient {
            background: linear-gradient(to right, #3b82f6 0%, #9333ea 100%);
        }
        .btn-gradient:hover {
            background: linear-gradient(to right, #2563eb 0%, #7c3aed 100%);
        }
        .card-gradient {
            background: linear-gradient(135deg, #1e40af 0%, #3730a3 100%);
        }
        .progress-bar {
            background: linear-gradient(to right, #3b82f6 0%, #9333ea 100%);
        }
        .scale-hover:hover {
            transform: scale(1.05);
        }
        .scale-102:hover {
            transform: scale(1.02);
        }
    </style>
</head>
<body class="min-h-screen gradient-bg">
    <!-- Start Page -->
    <div id="startPage" class="min-h-screen gradient-bg flex flex-col items-center justify-center p-6">
        <div class="max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center">
            <div class="mb-8">
                <div class="w-20 h-20 btn-gradient rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 2L3 7v11a1 1 0 001 1h3a1 1 0 001-1v-5h4v5a1 1 0 001 1h3a1 1 0 001-1V7l-7-5z" clip-rule="evenodd"></path>
                    </svg>
                </div>
                <h1 class="text-2xl font-bold text-gray-800 mb-2">æº–å‚™å¥½äº†å—ï¼Ÿ</h1>
                <p class="text-lg font-semibold text-blue-500">AI æ‡‰ç”¨ 3 åˆ†é˜å«é‡‘é‡å°æª¢æ¸¬</p>
            </div>

            <div class="space-y-4 mb-8 text-left">
                <div class="flex items-start">
                    <svg class="w-5 h-5 text-blue-500 mt-1 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12,6 12,12 16,14"></polyline>
                    </svg>
                    <p class="text-gray-600">åªéœ€ 3 åˆ†é˜ï¼Œå®Œæˆ 15 é“é¡Œç›®</p>
                </div>
                <div class="flex items-start">
                    <svg class="w-5 h-5 text-green-500 mt-1 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M18 20V10M12 20V4M6 20v-6"></path>
                    </svg>
                    <p class="text-gray-600">æ¸¬è©¦ä½ åœ¨ 5 å€‹å±¤ç´šçš„ AI æ‡‰ç”¨èƒ½åŠ›</p>
                </div>
                <div class="flex items-start">
                    <svg class="w-5 h-5 text-purple-500 mt-1 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M6 9l6 6 6-6"></path>
                    </svg>
                    <p class="text-gray-600">ç²å¾—å°ˆå±¬æˆå°±å¡èˆ‡æˆé•·å»ºè­°</p>
                </div>
            </div>

            <button onclick="showNamePage()" class="w-full btn-gradient text-white py-4 px-6 rounded-xl font-semibold text-lg hover:opacity-90 transition-all duration-300 transform scale-hover flex items-center justify-center">
                é–‹å§‹æ¸¬é©—
                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                    <polyline points="12,5 19,12 12,19"></polyline>
                </svg>
            </button>
        </div>
    </div>

    <!-- Name Input Page -->
    <div id="namePage" class="min-h-screen gradient-bg flex-col items-center justify-center p-6" style="display: none;">
        <div class="max-w-md w-full bg-white rounded-2xl shadow-xl p-8">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M9 12l2 2 4-4"></path>
                        <circle cx="12" cy="12" r="10"></circle>
                    </svg>
                </div>
                <h2 class="text-xl font-bold text-gray-800 mb-2">è¼¸å…¥ä½ çš„æš±ç¨±</h2>
                <p class="text-gray-600">å°‡é¡¯ç¤ºåœ¨æˆå°±å¡ä¸Š</p>
            </div>

            <input type="text" id="userNameInput" placeholder="è«‹è¼¸å…¥æš±ç¨±" maxlength="20" class="w-full p-4 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none text-lg mb-6 text-center">

            <button onclick="startQuiz()" id="startQuizBtn" disabled class="w-full btn-gradient text-white py-4 px-6 rounded-xl font-semibold text-lg hover:opacity-90 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform scale-hover">
                é€²å…¥æ¸¬é©—
            </button>
        </div>
    </div>

    <!-- Quiz Page -->
    <div id="quizPage" class="min-h-screen gradient-bg p-4" style="display: none;">
        <!-- Progress Bar -->
        <div class="max-w-md mx-auto mb-6">
            <div class="flex items-center justify-between mb-2">
                <div class="flex items-center">
                    <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <polygon points="13,2 3,14 12,14 11,22 21,10 12,10"></polygon>
                    </svg>
                    <span class="text-sm font-medium text-gray-600" id="questionProgress">
                        ç¬¬ 1 / 15 é¡Œ
                    </span>
                </div>
                <span class="text-sm font-medium text-blue-500" id="timeLeft">
                    å‰©é¤˜ 3:00
                </span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3 mb-4">
                <div id="progressBar" class="progress-bar h-3 rounded-full transition-all duration-300" style="width: 6.67%"></div>
            </div>

            <!-- Current Level Display -->
            <div class="text-center mb-4">
                <span id="currentLevelBadge" class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium text-white">
                    <span class="mr-2">ğŸ”</span>
                    åŸºç¤äº’å‹•
                </span>
            </div>

            <!-- Level Progress Indicators -->
            <div class="flex justify-center space-x-2 mb-4" id="levelIndicators">
                <!-- Dynamically populated -->
            </div>
        </div>

        <!-- Question -->
        <div class="max-w-md mx-auto bg-white rounded-2xl shadow-xl p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-6 leading-relaxed" id="questionText">
                <!-- Question text will be inserted here -->
            </h3>

            <div class="space-y-3" id="answerOptions">
                <!-- Answer options will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Result Page -->
    <div id="resultPage" class="min-h-screen gradient-bg p-4 py-8" style="display: none;">
        <div class="max-w-md mx-auto space-y-6">
            <!-- Achievement Card -->
            <div class="card-gradient rounded-2xl shadow-2xl p-6 text-white relative overflow-hidden">
                <div class="absolute top-4 right-4">
                    <svg class="w-8 h-8 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 2L3 7v11a1 1 0 001 1h3a1 1 0 001-1v-5h4v5a1 1 0 001 1h3a1 1 0 001-1V7l-7-5z" clip-rule="evenodd"></path>
                    </svg>
                </div>

                <div class="text-center pt-4">
                    <h2 class="text-2xl font-bold mb-2" id="resultUserName"></h2>
                    <div class="text-lg font-semibold mb-2" id="resultRoleName"></div>
                    <div class="text-3xl font-bold text-yellow-400 mb-4" id="resultScore">0 åˆ†</div>
                    <p class="text-sm text-gray-300 mb-4">AI æ‡‰ç”¨å«é‡‘é‡å°æª¢æ¸¬</p>
                </div>

                <!-- Level Badges -->
                <div class="flex justify-center space-x-2 mb-4" id="resultLevelBadges">
                    <!-- Level badges will be inserted here -->
                </div>
            </div>

            <!-- Detailed Analysis -->
            <div class="bg-white rounded-2xl shadow-xl p-6">
                <div class="flex items-center mb-4">
                    <svg class="w-6 h-6 text-gray-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M18 20V10M12 20V4M6 20v-6"></path>
                    </svg>
                    <h3 class="text-lg font-semibold text-gray-800">å±¤ç´šåˆ†æ</h3>
                </div>

                <div class="space-y-3 mb-6" id="levelAnalysis">
                    <!-- Level analysis will be inserted here -->
                </div>

                <div class="p-4 rounded-xl bg-blue-50 border border-blue-200">
                    <h4 class="font-semibold mb-2 text-blue-800">ğŸ“ ä¸‹ä¸€æ­¥å»ºè­°</h4>
                    <p class="text-sm text-blue-700" id="suggestion"></p>
                </div>
            </div>

            <!-- Course Recommendations -->
            <div class="bg-white rounded-2xl shadow-xl p-6">
                <div class="flex items-center mb-4">
                    <svg class="w-6 h-6 text-purple-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                    <h3 class="text-lg font-semibold text-gray-800">èª²ç¨‹æ¨è–¦</h3>
                </div>

                <div class="space-y-3">
                    <div class="p-4 bg-purple-50 rounded-xl border border-purple-200 cursor-pointer hover:bg-purple-100 transition-colors" onclick="window.open('https://www.accupass.com/event/2509141536331868520697', '_blank')">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <svg class="w-5 h-5 text-purple-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                    <line x1="16" y1="2" x2="16" y2="6"></line>
                                    <line x1="8" y1="2" x2="8" y2="6"></line>
                                    <line x1="3" y1="10" x2="21" y2="10"></line>
                                </svg>
                                <div>
                                    <div class="font-semibold text-purple-800">9/27 å°ä¸­ç­</div>
                                    <div class="text-sm text-purple-600">AI ç³»çµ±åŒ–æ‡‰ç”¨</div>
                                </div>
                            </div>
                            <button class="bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-purple-700 transition-colors">
                                ç«‹å³å ±å
                            </button>
                        </div>
                    </div>

                    <div class="p-4 bg-green-50 rounded-xl border border-green-200 cursor-pointer hover:bg-green-100 transition-colors" onclick="window.open('https://www.accupass.com/event/2509140953152591452460', '_blank')">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <svg class="w-5 h-5 text-green-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                    <line x1="16" y1="2" x2="16" y2="6"></line>
                                    <line x1="8" y1="2" x2="8" y2="6"></line>
                                    <line x1="3" y1="10" x2="21" y2="10"></line>
                                </svg>
                                <div>
                                    <div class="font-semibold text-green-800">9/28 å°åŒ—ç­</div>
                                    <div class="text-sm text-green-600">AI è¶…é€Ÿå“ç‰Œå·¥ä½œæµ</div>
                                </div>
                            </div>
                            <button class="bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-700 transition-colors">
                                ç«‹å³å ±å
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex space-x-4">
                <button onclick="downloadCard()" class="w-full btn-gradient text-white py-3 px-4 rounded-xl font-semibold hover:opacity-90 transition-all duration-300 flex items-center justify-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"></path>
                    </svg>
                    ä¸‹è¼‰æˆå°±å¡
                </button>
            </div>

            <!-- Restart Button -->
            <button onclick="restartQuiz()" class="w-full bg-white text-gray-600 py-3 px-4 rounded-xl font-semibold hover:bg-gray-50 transition-colors border-2 border-gray-200">
                é‡æ–°æ¸¬é©—
            </button>
        </div>
    </div>

    <script>
        // Global variables
        let currentPage = 'start';
        let userName = '';
        let currentQuestion = 0;
        let answers = [];
        let timeLeft = 180; // 3 minutes
        let results = null;
        let timer = null;

        // Questions array
        const questions = [
            // ç¬¬ä¸€å±¤ï½œåŸºç¤äº’å‹• (0-2)
            "ä½ ä½¿ç”¨ AI æ™‚ï¼Œä¸»è¦æ˜¯æ‹¿å®ƒä¾†å¿«é€ŸæŸ¥æ‰¾èˆ‡æ•´ç†è³‡æ–™ï¼Ÿ",
            "ç•¶ AI çµ¦ä½ ç­”æ¡ˆå¾Œï¼Œä½ æœƒç›´æ¥çµæŸå°è©±ï¼Œå¾ˆå°‘å»¶çºŒä¸Šä¸‹æ–‡æ·±å…¥æ¢è¨ï¼Ÿ",
            "ä½ ä¸»è¦æŠŠ AI ç•¶ä½œå¿«é€Ÿè§£ç­”å•é¡Œçš„å·¥å…·ï¼Œè¼ƒå°‘è¦–ç‚ºå”ä½œå¤¥ä¼´ï¼Ÿ",

            // ç¬¬äºŒå±¤ï½œå·¥ä½œæµæ‡‰ç”¨ (3-5)
            "ä½ æœƒç¶­æŒä¸Šä¸‹æ–‡ï¼Œè®“ AI å¹«ä½ è¿½è¹¤æˆ–å»¶çºŒå°ˆæ¡ˆé€²åº¦ï¼Ÿ",
            "ä½ æ›¾ç”¨ AI æ•´ç†æœƒè­°ç´€éŒ„æˆ–å°ˆæ¡ˆè¦åŠƒï¼Œä¸¦é€éå¤šæ¬¡è¿½å•è®“å…§å®¹æ›´å®Œæ•´ï¼Ÿ",
            "ä½ è¦ºå¾— AI åœ¨äº’å‹•éç¨‹ä¸­ï¼Œå·²ç¶“åƒå€‹å°åŠ©ç†ï¼Œèƒ½å¹«ä½ ç¯€çœæ™‚é–“ï¼Ÿ",

            // ç¬¬ä¸‰å±¤ï½œç³»çµ±åŒ–é‹ä½œ (6-8)
            "ä½ æœƒè®“ AI æ‹†è§£æµç¨‹ï¼Œä¸¦è½‰æ›æˆ SOP æˆ–æº–å‰‡æ–‡ä»¶ï¼Ÿ",
            "ä½ æ›¾ç¶“è®“ AI è®€å–èˆ‡æ•´ç†æª”æ¡ˆï¼Œä¸¦èˆ‡ä½ é€²è¡Œäº’å‹•è™•ç†ï¼Ÿ",
            "ä½ æœƒæ€è€ƒå¦‚ä½•æŠŠ AI æ•´åˆåˆ°æ—¢æœ‰å·¥ä½œç³»çµ±ï¼Œè€Œä¸æ˜¯åªè§£æ±ºå–®ä¸€å•é¡Œï¼Ÿ",

            // ç¬¬å››å±¤ï½œè‡ªå‹•åŒ–æ‡‰ç”¨ (9-11)
            "ä½ ç”¨é n8n / Zapier ç­‰è‡ªå‹•åŒ–å·¥å…·ï¼ŒæŠŠ AI ç´å…¥å›ºå®šæµç¨‹ï¼Ÿ",
            "ä½ æ›¾ç¶“é€é Vibe Coding æˆ–å…¶ä»–ç¨‹å¼å·¥å…·æ‰“é€ éå°ˆå±¬çš„å°ä»‹é¢ï¼Ÿ",
            "ä½ æœƒè®“ AI çš„äº¤äº’æ¨™æº–åŒ–ï¼ˆå›ºå®šè¼¸å…¥ã€å›ºå®šè¼¸å‡ºæ ¼å¼ï¼‰ï¼Œä»¥æå‡ä¸€è‡´æ€§ï¼Ÿ",

            // ç¬¬äº”å±¤ï½œç”Ÿæ…‹åŒ–å”ä½œ (12-14)
            "ä½ æ›¾ç¶“å˜—è©¦ä¸²æ¥å¤šå€‹ AI æˆ–ç³»çµ±ï¼Œè®“å®ƒå€‘å½¼æ­¤å”ä½œï¼Ÿ",
            "ä½ è¨­è¨ˆéã€ŒAI + äººã€æ··åˆæ¨¡å¼ï¼Œè®“ä¸åŒè§’è‰²å¯ä»¥åˆ†å·¥åˆä½œï¼Ÿ",
            "ä½ æœŸå¾… AI ä¸»å‹•æå‡ºå„ªåŒ–å»ºè­°ï¼Œç”šè‡³èƒ½è‡ªæˆ‘æ”¹å–„æµç¨‹ï¼Ÿ"
        ];

        // Levels definition
        const levels = [
            { id: 1, name: 'åŸºç¤äº’å‹•', color: '#FF6B7A', range: [0, 2], icon: 'ğŸ”' },
            { id: 2, name: 'å·¥ä½œæµæ‡‰ç”¨', color: '#4ECDC4', range: [3, 5], icon: 'âš¡' },
            { id: 3, name: 'ç³»çµ±åŒ–é‹ä½œ', color: '#45B7D1', range: [6, 8], icon: 'ğŸ”§' },
            { id: 4, name: 'è‡ªå‹•åŒ–æ‡‰ç”¨', color: '#F7DC6F', range: [9, 11], icon: 'ğŸ¤–' },
            { id: 5, name: 'ç”Ÿæ…‹åŒ–å”ä½œ', color: '#C8A2C8', range: [12, 14], icon: 'ğŸŒ' }
        ];

        // Answer options
        const answerOptions = [
            { id: 1, name: 'å®Œå…¨ä¸æœƒ / å¹¾ä¹ä¸æœƒ', color: '#FF6B7A', score: 1 },
            { id: 2, name: 'å¶çˆ¾æœƒ', color: '#4ECDC4', score: 2 },
            { id: 3, name: 'ç¶“å¸¸æœƒ', color: '#45B7D1', score: 3 },
            { id: 4, name: 'å¹¾ä¹æ¯æ¬¡éƒ½æœƒ', color: '#F7DC6F', score: 4 }
        ];

        // Role types
        const roleTypes = [
            {
                id: 1,
                name: 'æ–°æ‰‹æ¢éšªè€…',
                color: '#FF6B7A',
                description: 'ä½ æ­£é–‹å§‹æ¢ç´¢ AI çš„å¯èƒ½æ€§ï¼Œå»ºè­°å¤šå˜—è©¦ä¸åŒçš„ AI å·¥å…·å’Œæ‡‰ç”¨å ´æ™¯ã€‚',
                suggestion: 'å»ºè­°å…ˆç†Ÿæ‚‰åŸºæœ¬çš„ AI å°è©±æŠ€å·§ï¼Œå­¸ç¿’å¦‚ä½•æå‡ºæ›´ç²¾æº–çš„å•é¡Œã€‚'
            },
            {
                id: 2,
                name: 'å‹¤å¥®å·¥åŒ ',
                color: '#4ECDC4',
                description: 'ä½ å·²ç¶“ç†Ÿç·´ä½¿ç”¨ AI è™•ç†æ—¥å¸¸å·¥ä½œï¼Œå¯ä»¥è€ƒæ…®å°‡ç¶“é©—ç³»çµ±åŒ–å’Œæ¨™æº–åŒ–ã€‚',
                suggestion: 'å¯ä»¥é–‹å§‹å»ºç«‹è‡ªå·±çš„ AI ä½¿ç”¨æ¨¡æ¿ï¼Œä¸¦å˜—è©¦æ•´åˆåˆ°å·¥ä½œæµç¨‹ä¸­ã€‚'
            },
            {
                id: 3,
                name: 'æµç¨‹é§•é¦­è€…',
                color: '#45B7D1',
                description: 'ä½ å–„æ–¼å°‡ AI æ•´åˆåˆ°å·¥ä½œæµç¨‹ä¸­ï¼Œå»ºè­°æœè‡ªå‹•åŒ–å’Œç”Ÿæ…‹åŒ–æ–¹å‘ç™¼å±•ã€‚',
                suggestion: 'å¯ä»¥å­¸ç¿’è‡ªå‹•åŒ–å·¥å…·ï¼Œé–‹å§‹è¨­è¨ˆ AI + äººçš„å”ä½œæ¨¡å¼ã€‚'
            },
            {
                id: 4,
                name: 'ç­–ç•¥é ˜èˆªè€…',
                color: '#F7DC6F',
                description: 'ä½ å·²ç¶“æŒæ¡ AI çš„ç­–ç•¥æ‡‰ç”¨ï¼Œå¯ä»¥å¸¶é ˜åœ˜éšŠå»ºç«‹ AI é©…å‹•çš„å·¥ä½œæ¨¡å¼ã€‚',
                suggestion: 'å¯ä»¥é–‹å§‹è¨­è¨ˆä¼æ¥­ç´šçš„ AI æ‡‰ç”¨æ–¹æ¡ˆï¼Œä¸¦åŸ¹è¨“åœ˜éšŠæˆå“¡ã€‚'
            }
        ];

        // Page navigation functions
        function showNamePage() {
            document.getElementById('startPage').style.display = 'none';
            document.getElementById('namePage').style.display = 'flex';
            currentPage = 'name';
        }

        function startQuiz() {
            userName = document.getElementById('userNameInput').value.trim();
            if (userName) {
                document.getElementById('namePage').style.display = 'none';
                document.getElementById('quizPage').style.display = 'block';
                currentPage = 'quiz';
                initializeQuiz();
                startTimer();
            }
        }

        function showResultPage() {
            document.getElementById('quizPage').style.display = 'none';
            document.getElementById('resultPage').style.display = 'block';
            currentPage = 'result';
            stopTimer();
            setTimeout(() => {
                calculateResults();
            }, 100);
        }

        function restartQuiz() {
            currentPage = 'start';
            userName = '';
            currentQuestion = 0;
            answers = [];
            timeLeft = 180;
            results = null;
            stopTimer();

            document.getElementById('resultPage').style.display = 'none';
            document.getElementById('startPage').style.display = 'flex';
            document.getElementById('userNameInput').value = '';
            updateStartButton();
        }

        // Timer functions
        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                updateTimeDisplay();
                if (timeLeft <= 0) {
                    stopTimer();
                    showResultPage();
                }
            }, 1000);
        }

        function stopTimer() {
            if (timer) {
                clearInterval(timer);
                timer = null;
            }
        }

        function updateTimeDisplay() {
            const mins = Math.floor(timeLeft / 60);
            const secs = timeLeft % 60;
            document.getElementById('timeLeft').textContent = `å‰©é¤˜ ${mins}:${secs.toString().padStart(2, '0')}`;
        }

        // Quiz functions
        function initializeQuiz() {
            updateQuizDisplay();
            updateLevelIndicators();
        }

        function updateQuizDisplay() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            const currentLevel = getCurrentLevel(currentQuestion);

            document.getElementById('questionProgress').textContent = `ç¬¬ ${currentQuestion + 1} / ${questions.length} é¡Œ`;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('questionText').textContent = questions[currentQuestion];

            // Update current level badge
            const badge = document.getElementById('currentLevelBadge');
            badge.style.backgroundColor = currentLevel.color;
            badge.innerHTML = `<span class="mr-2">${currentLevel.icon}</span>${currentLevel.name}`;

            // Update answer options
            const optionsContainer = document.getElementById('answerOptions');
            optionsContainer.innerHTML = '';

            answerOptions.forEach(option => {
                const button = document.createElement('button');
                button.className = 'w-full p-4 text-left rounded-xl border-2 border-gray-200 hover:border-gray-300 transition-all duration-200 transform scale-102';
                button.style.backgroundColor = `${option.color}15`;
                button.style.borderColor = `${option.color}50`;
                button.innerHTML = `<span class="font-semibold" style="color: ${option.color}">${option.name}</span>`;
                button.onclick = () => handleAnswer(option.id);
                optionsContainer.appendChild(button);
            });
        }

        function updateLevelIndicators() {
            const container = document.getElementById('levelIndicators');
            container.innerHTML = '';

            levels.forEach(level => {
                const questionsInLevel = [];
                for (let i = level.range[0]; i <= level.range[1]; i++) {
                    questionsInLevel.push(i);
                }

                const answeredInLevel = questionsInLevel.filter(i => answers[i] !== undefined).length;
                const totalInLevel = questionsInLevel.length;
                const fillPercentage = (answeredInLevel / totalInLevel) * 100;

                const indicator = document.createElement('div');
                indicator.className = 'text-center';
                indicator.innerHTML = `
                    <div class="w-8 h-8 rounded-full border-2 border-gray-200 flex items-center justify-center mb-1 relative overflow-hidden">
                        <div class="absolute bottom-0 left-0 right-0 transition-all duration-300" style="background-color: ${level.color}; height: ${fillPercentage}%"></div>
                        <span class="text-xs font-bold text-gray-600 relative z-10">${level.id}</span>
                    </div>
                    <span class="text-xs text-gray-500">${answeredInLevel}/${totalInLevel}</span>
                `;
                container.appendChild(indicator);
            });
        }

        function getCurrentLevel(questionIndex) {
            return levels.find(level =>
                questionIndex >= level.range[0] && questionIndex <= level.range[1]
            );
        }

        function handleAnswer(optionId) {
            answers.push(optionId);

            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                updateQuizDisplay();
                updateLevelIndicators();
            } else {
                showResultPage();
            }
        }

        // Result calculation functions
        function calculateResults() {
            const roleCounts = { 1: 0, 2: 0, 3: 0, 4: 0 };
            let weightedScore = 0;

            // Calculate weighted score based on level progression
            answers.forEach((answer, index) => {
                roleCounts[answer]++;

                // Determine which level this question belongs to
                const currentLevel = getCurrentLevel(index);
                const levelWeight = currentLevel.id; // Level 1 = weight 1, Level 5 = weight 5

                // For Level 1 (åŸºç¤äº’å‹•), reverse scoring only for questions 2-3 (index 1-2)
                let adjustedAnswer = answer;
                if (currentLevel.id === 1 && (index === 1 || index === 2)) {
                    // Reverse score: 1->4, 2->3, 3->2, 4->1
                    // å®Œå…¨ä¸æœƒ/å¹¾ä¹ä¸æœƒ -> é«˜åˆ† (é€²éšè¡Œç‚º)
                    // å¹¾ä¹æ¯æ¬¡éƒ½æœƒ -> ä½åˆ† (åŸºç¤è¡Œç‚º)
                    adjustedAnswer = 5 - answer;
                }
                // Question 1 (index 0) keeps normal scoring: å¿«é€ŸæŸ¥æ‰¾è³‡æ–™æ˜¯åŸºç¤èƒ½åŠ›ï¼Œåšå¾—å¤šå¾—åˆ†é«˜

                weightedScore += adjustedAnswer * levelWeight;
            });

            // Convert to 100-point scale
            // Max possible score: 15 questions Ã— 4 max points Ã— average weight (3)
            const maxPossibleScore = 15 * 4 * 3; // 180
            const totalScore = Math.round((weightedScore / maxPossibleScore) * 100);

            // Determine primary role based on weighted total score (out of 100)
            let primaryRoleId;
            if (totalScore <= 35) {
                primaryRoleId = 1; // æ–°æ‰‹æ¢éšªè€…
            } else if (totalScore <= 55) {
                primaryRoleId = 2; // å‹¤å¥®å·¥åŒ 
            } else if (totalScore <= 75) {
                primaryRoleId = 3; // æµç¨‹é§•é¦­è€…
            } else {
                primaryRoleId = 4; // ç­–ç•¥é ˜èˆªè€…
            }

            const primaryRole = roleTypes.find(role => role.id === primaryRoleId);
            const levelBadges = calculateLevelBadges();

            results = {
                totalScore,
                roleCounts,
                primaryRole,
                levelBadges,
                answers: answers
            };

            displayResults();
        }

        function calculateLevelBadges() {
            const levelScores = {};

            levels.forEach(level => {
                let levelTotal = 0;
                let yesCount = 0;
                const questionsInLevel = level.range[1] - level.range[0] + 1;

                for (let i = level.range[0]; i <= level.range[1]; i++) {
                    if (answers[i]) {
                        levelTotal += answers[i];
                        if (answers[i] >= 3) yesCount++; // "ç¶“å¸¸æœƒ" æˆ– "å¹¾ä¹æ¯æ¬¡éƒ½æœƒ" ç®—ä½œ "æ˜¯"
                    }
                }

                // Calculate weighted percentage for this level
                const maxLevelScore = questionsInLevel * 4; // 3é¡Œ * 4åˆ†æ»¿åˆ†
                const levelPercentage = Math.round((levelTotal / maxLevelScore) * 100);

                levelScores[level.id] = {
                    total: levelTotal,
                    yesCount: yesCount,
                    maxQuestions: questionsInLevel,
                    percentage: levelPercentage
                };
            });

            return levelScores;
        }

        function displayResults() {
            // Update achievement card
            document.getElementById('resultUserName').textContent = userName;
            document.getElementById('resultRoleName').textContent = results.primaryRole.name;
            document.getElementById('resultRoleName').style.color = results.primaryRole.color;
            document.getElementById('resultScore').textContent = `${results.totalScore} åˆ†`;
            document.getElementById('suggestion').textContent = results.primaryRole.suggestion;

            // Update level badges
            const badgesContainer = document.getElementById('resultLevelBadges');
            badgesContainer.innerHTML = '';

            levels.forEach(level => {
                const badge = results.levelBadges[level.id];
                const isActive = badge.yesCount >= 2; // è‡³å°‘2é¡Œå›ç­”"ç¶“å¸¸æœƒ"ä»¥ä¸Š

                const badgeElement = document.createElement('div');
                badgeElement.className = `w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold border-2 ${
                    isActive
                        ? 'border-yellow-400 text-yellow-400'
                        : 'border-gray-500 text-gray-500'
                }`;
                badgeElement.style.backgroundColor = isActive ? `${level.color}30` : 'transparent';
                badgeElement.textContent = level.icon;
                badgesContainer.appendChild(badgeElement);
            });

            // Update level analysis
            const analysisContainer = document.getElementById('levelAnalysis');
            analysisContainer.innerHTML = '';

            levels.forEach(level => {
                const badge = results.levelBadges[level.id];
                const analysisElement = document.createElement('div');
                analysisElement.className = 'flex items-center justify-between';
                analysisElement.innerHTML = `
                    <div class="flex items-center">
                        <span class="mr-2">${level.icon}</span>
                        <span class="text-sm font-medium">${level.name}</span>
                    </div>
                    <div class="flex items-center">
                        <span class="text-sm text-gray-600 mr-2">${badge.yesCount}/${badge.maxQuestions}</span>
                        <div class="w-16 bg-gray-200 rounded-full h-2">
                            <div class="h-2 rounded-full transition-all duration-500" style="background-color: ${level.color}; width: ${badge.percentage}%"></div>
                        </div>
                    </div>
                `;
                analysisContainer.appendChild(analysisElement);
            });
        }

        // Utility functions
        function updateStartButton() {
            const input = document.getElementById('userNameInput');
            const button = document.getElementById('startQuizBtn');

            input.addEventListener('input', function() {
                button.disabled = !this.value.trim();
            });
        }

        function downloadCard() {
            if (!results) return;

            // Create canvas
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 600;
            canvas.height = 400;

            // Background gradient
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#1e40af');
            gradient.addColorStop(1, '#3730a3');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Award icon background circle
            ctx.fillStyle = '#FFC107';
            ctx.beginPath();
            ctx.arc(canvas.width - 60, 60, 25, 0, 2 * Math.PI);
            ctx.fill();

            // Award icon (simplified star)
            ctx.fillStyle = '#FFFFFF';
            ctx.font = '24px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('â˜…', canvas.width - 60, 70);

            // User name
            ctx.fillStyle = '#FFFFFF';
            ctx.font = 'bold 36px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(userName, canvas.width / 2, 120);

            // Role name
            ctx.fillStyle = results.primaryRole.color;
            ctx.font = 'bold 24px Arial';
            ctx.fillText(results.primaryRole.name, canvas.width / 2, 160);

            // Score
            ctx.fillStyle = '#FFC107';
            ctx.font = 'bold 48px Arial';
            ctx.fillText(`${results.totalScore} åˆ†`, canvas.width / 2, 220);

            // Certification text
            ctx.fillStyle = '#CBD5E0';
            ctx.font = '16px Arial';
            ctx.fillText('AI æ‡‰ç”¨å«é‡‘é‡å°æª¢æ¸¬', canvas.width / 2, 250);

            // Level badges
            const badgeY = 300;
            const badgeSpacing = 80;
            const startX = (canvas.width - (levels.length - 1) * badgeSpacing) / 2;

            levels.forEach((level, index) => {
                const badge = results.levelBadges[level.id];
                const isActive = badge.yesCount >= 2;
                const x = startX + index * badgeSpacing;

                // Badge circle
                ctx.strokeStyle = isActive ? '#FFC107' : '#6B7280';
                ctx.fillStyle = isActive ? level.color + '30' : 'transparent';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.arc(x, badgeY, 25, 0, 2 * Math.PI);
                ctx.fill();
                ctx.stroke();

                // Badge emoji/icon
                ctx.fillStyle = isActive ? '#FFC107' : '#6B7280';
                ctx.font = '20px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(level.icon, x, badgeY + 7);
            });

            // Date stamp
            const now = new Date();
            const dateStr = now.toLocaleDateString('zh-TW');
            ctx.fillStyle = '#CBD5E0';
            ctx.font = '12px Arial';
            ctx.textAlign = 'right';
            ctx.fillText(`æ¸¬è©¦æ—¥æœŸï¼š${dateStr}`, canvas.width - 20, canvas.height - 20);

            // Convert to blob and download
            canvas.toBlob((blob) => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${userName}_AIæ‡‰ç”¨æˆå°±å¡_${dateStr}.png`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 'image/png');
        }

        function shareResults() {
            if (!results) return;

            // Generate share text
            const shareText = generateShareText();

            // Try to use Web Share API if available (mobile devices)
            if (navigator.share) {
                navigator.share({
                    title: 'AI æ‡‰ç”¨å«é‡‘é‡æª¢æ¸¬çµæœ',
                    text: shareText,
                    url: window.location.href
                }).catch(err => {
                    console.log('åˆ†äº«å–æ¶ˆæˆ–å¤±æ•—:', err);
                    fallbackShare(shareText);
                });
            } else {
                // Fallback for desktop browsers
                fallbackShare(shareText);
            }
        }

        function generateShareText() {
            const levelBadgeText = levels.map(level => {
                const badge = results.levelBadges[level.id];
                const isActive = badge.yesCount >= 2;
                return `${level.icon}${level.name}: ${isActive ? 'âœ…' : 'âšª'}`;
            }).join(' | ');

            return `ğŸ¯ æˆ‘å®Œæˆäº† AI æ‡‰ç”¨å«é‡‘é‡æª¢æ¸¬ï¼

ğŸ‘¤ ${userName}
ğŸ† ${results.primaryRole.name}
ğŸ’¯ ç¸½åˆ†ï¼š${results.totalScore}/100 åˆ†

ğŸ“Š å±¤ç´šè¡¨ç¾ï¼š
${levelBadgeText}

ğŸ’¡ ${results.primaryRole.suggestion}

ç«‹å³æª¢æ¸¬ä½ çš„ AI æ‡‰ç”¨èƒ½åŠ›ï¼`;
        }

        function fallbackShare(shareText) {
            // Create modal for sharing options
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-md w-full">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-bold text-gray-800">åˆ†äº«çµæœ</h3>
                        <button onclick="closeShareModal()" class="text-gray-500 hover:text-gray-700">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>

                    <div class="space-y-3 mb-6">
                        <button onclick="shareToFacebook()" class="w-full flex items-center justify-center bg-blue-600 text-white py-3 px-4 rounded-xl font-semibold hover:bg-blue-700 transition-colors">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                            åˆ†äº«åˆ° Facebook
                        </button>

                        <button onclick="shareToLine()" class="w-full flex items-center justify-center bg-green-500 text-white py-3 px-4 rounded-xl font-semibold hover:bg-green-600 transition-colors">
                            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346 0 .627.285.627.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771z"/>
                            </svg>
                            åˆ†äº«åˆ° LINE
                        </button>

                        <button onclick="copyShareText()" class="w-full flex items-center justify-center bg-gray-600 text-white py-3 px-4 rounded-xl font-semibold hover:bg-gray-700 transition-colors">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
                            </svg>
                            è¤‡è£½æ–‡å­—å…§å®¹
                        </button>
                    </div>

                    <div class="bg-gray-50 rounded-xl p-4 max-h-40 overflow-y-auto">
                        <p class="text-sm text-gray-600 whitespace-pre-line">${shareText}</p>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
            window.currentShareModal = modal;
            window.currentShareText = shareText;
        }

        function closeShareModal() {
            if (window.currentShareModal) {
                document.body.removeChild(window.currentShareModal);
                window.currentShareModal = null;
                window.currentShareText = null;
            }
        }

        function shareToFacebook() {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent(window.currentShareText);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`, '_blank');
            closeShareModal();
        }

        function shareToLine() {
            const text = encodeURIComponent(window.currentShareText + '\n\n' + window.location.href);
            window.open(`https://social-plugins.line.me/lineit/share?url=${text}`, '_blank');
            closeShareModal();
        }

        async function copyShareText() {
            try {
                await navigator.clipboard.writeText(window.currentShareText);

                // Show success message
                const button = event.target.closest('button');
                const originalText = button.innerHTML;
                button.innerHTML = `
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <polyline points="20,6 9,17 4,12"></polyline>
                    </svg>
                    å·²è¤‡è£½ï¼
                `;
                button.className = button.className.replace('bg-gray-600 hover:bg-gray-700', 'bg-green-600 hover:bg-green-700');

                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.className = button.className.replace('bg-green-600 hover:bg-green-700', 'bg-gray-600 hover:bg-gray-700');
                }, 2000);

            } catch (err) {
                console.error('è¤‡è£½å¤±æ•—:', err);
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = window.currentShareText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('å…§å®¹å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼');
            }
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            updateStartButton();
        });
    </script>
</body>
</html>